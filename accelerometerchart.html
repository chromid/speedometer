<!DOCTYPE html><html lang="pl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="robots" content="noindex, nofollow, noarchive, nosnippet"><title>Wykres akcelerometru</title><script src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/10.3.3/highcharts.js"></script><style> * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; overflow: hidden; height: 100vh; background-color: #fafafa; } .container { position: relative; width: 100%; height: 100vh; } #chart-container { width: 100%; height: 100%; } .highcharts-title { font-weight: 400 !important; font-size: 20px !important; } .highcharts-axis-title { font-weight: normal !important; } </style></head><body><div class="container"><div id="chart-container"></div></div><script> const MAX_DATA_POINTS = 100; let accelerometerData = []; const chart = Highcharts.chart('chart-container', { chart: { type: 'spline', animation: Highcharts.svg, marginRight: 10, backgroundColor: '#fafafa', style: { fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif' } }, title: { text: 'Wykres danych z akcelerometru (m/s²)', align: 'center' }, xAxis: { type: 'datetime', tickPixelInterval: 150, title: { text: 'Czas' } }, yAxis: { title: { text: 'Przyspieszenie (m/s²)' } }, tooltip: { headerFormat: '<b>{series.name}</b><br/>', pointFormat: '{point.x:%H:%M:%S.%L}<br/>{point.y:.2f} m/s²' }, plotOptions: { spline: { marker: { enabled: true, radius: 3, symbol: 'circle' } } }, legend: { enabled: true }, credits: { enabled: false }, accessibility: { enabled: true, description: 'Wykres prezentujący dane z akcelerometru urządzenia mobilnego w czasie rzeczywistym' }, series: [{ name: 'Oś X', color: '#0063FF', data: [] }, { name: 'Oś Y', color: '#00B5A0', data: [] }, { name: 'Oś Z', color: '#FF6B8A', data: [] }, { name: 'Magnitude', color: '#8A2BE2', data: [] }] }); function handleMotion(event) { if (!event.acceleration) return; const x = event.acceleration.x || 0; const y = event.acceleration.y || 0; const z = event.acceleration.z || 0; const magnitude = Math.sqrt(x * x + y * y + z * z); const now = Date.now(); chart.series[0].addPoint([now, x], false); chart.series[1].addPoint([now, y], false); chart.series[2].addPoint([now, z], false); chart.series[3].addPoint([now, magnitude], true); if (chart.series[0].data.length > MAX_DATA_POINTS) { chart.series[0].data[0].remove(false); chart.series[1].data[0].remove(false); chart.series[2].data[0].remove(false); chart.series[3].data[0].remove(false); } } async function startAccelerometer() { try { if (!window.DeviceMotionEvent) { showError('Twoja przeglądarka nie obsługuje API DeviceMotion'); return; } if (typeof DeviceMotionEvent.requestPermission === 'function') { const permission = await DeviceMotionEvent.requestPermission(); if (permission !== 'granted') { showError('Odmówiono uprawnień do akcelerometru'); return; } } window.addEventListener('devicemotion', handleMotion); } catch (error) { showError('Błąd przy próbie uzyskania uprawnień: ' + error.message); } } function showError(message) { chart.renderer.text(message, chart.chartWidth / 2 - 100, chart.chartHeight / 2) .css({ color: '#FF0000', fontSize: '16px' }) .add(); } window.addEventListener('resize', function() { chart.reflow(); }); window.addEventListener('load', function() { if (typeof DeviceMotionEvent.requestPermission === 'function') { document.body.addEventListener('click', function bodyClick() { startAccelerometer(); document.body.removeEventListener('click', bodyClick); }, { once: true }); chart.renderer.text('Kliknij gdziekolwiek na ekranie, aby rozpocząć pomiar', chart.chartWidth / 2 - 150, chart.chartHeight / 2) .css({ color: '#333', fontSize: '16px' }) .add(); } else { startAccelerometer(); } }); </script></body></html>
